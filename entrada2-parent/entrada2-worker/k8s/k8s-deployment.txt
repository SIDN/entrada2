./mvnw spring-boot:build-image


kubectl apply -f spring-cloud-kubernetes-discoveryserver.yml

kubectl port-forward  services/spring-cloud-kubernetes-discoveryserver 31674:80 --address='0.0.0.0'

#see bugs:
https://github.com/spring-cloud/spring-cloud-kubernetes/issues/938



kubectl run mypod --image=docker.io/library/eurekaclient \
            --labels type=web \
            --dry-run=client -o yaml > eureka.yaml


kubectl create deployment eureka --image=eurekaclient:0.0.1-SNAPSHOT --dry-run=client -o yaml > deployment.yaml


kubectl expose deployment eureka \
    --type=NodePort \
    --port=8080 \
    --name=eureka-service \
    --dry-run=client -o yaml > deployment-service.yaml


kubectl port-forward svc/eureka-service 8080:8080 --address='0.0.0.0'


# maak nieuwe versie:

./mvnw spring-boot:build-image
kubectl rollout restart deployment/eureka
kubectl port-forward svc/eureka-service 8080:8080 --address='0.0.0.0'



